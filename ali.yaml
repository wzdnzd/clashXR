# reference: https://github.com/Hackl0us/SS-Rule-Snippet/blob/master/LAZY_RULES/clash.yaml
# reference: https://lancellc.gitbook.io/clash/clash-config-file/dns

# HTTP ä»£ç†ç«¯å£
# port: 13661

# SOCKS5 ä»£ç†ç«¯å£
# socks-port: 13660

# HTTPå’ŒSOCKS5å…±ç”¨åŒä¸€ä¸ªç«¯å£
mixed-port: 13600

# Linux å’Œ macOS çš„ redir ä»£ç†ç«¯å£ (å¦‚éœ€ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·å–æ¶ˆæ³¨é‡Š)
# redir-port: 7892

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: false

# è§„åˆ™æ¨¡å¼ï¼šRuleï¼ˆè§„åˆ™ï¼‰ / Globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ Directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: Rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: error

# clash çš„ RESTful API
external-controller: 127.0.0.1:19090

# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# RESTful API çš„å£ä»¤ (å¯é€‰)
# secret: ""

# å®éªŒæ€§åŠŸèƒ½
experimental:
  ignore-resolve-fail: true # å¿½ç•¥ DNS è§£æå¤±è´¥ï¼Œé»˜è®¤å€¼ä¸º true

# æœ¬åœ° SOCKS5 / HTTP(S) æœåŠ¡è®¤è¯
# authentication:
#  - "user1:pass1"
#  - "user2:pass2"

# # å®éªŒæ€§åŠŸèƒ½ hosts, æ”¯æŒé€šé…ç¬¦ (ä¾‹å¦‚ *.clash.dev ç”šè‡³ *.foo.*.example.com)
# # é™æ€çš„åŸŸå æ¯” é€šé…åŸŸå å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ (foo.example.com ä¼˜å…ˆäº *.example.com)
# # æ³¨æ„: hosts åœ¨ fake-ip æ¨¡å¼ä¸‹ä¸ç”Ÿæ•ˆ
# hosts:
#   '*.clash.dev': 127.0.0.1
#   'alpha.clash.dev': '::1'

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  default-nameserver:
  - 114.114.114.114
  - 223.5.5.5
  enhanced-mode: fake-ip # redir-host
  fake-ip-range: 198.18.0.1/16 # å¦‚æœä½ ä¸çŸ¥é“è¿™ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œè¯·å‹¿ä¿®æ”¹
  fake-ip-filter: # fake-ip ç™½åå•åˆ—è¡¨
  - '*.lan'
  - localhost.ptlogin2.qq.com
  - '.ali.com'
  - '.alibaba-inc.com'
  - '.alibaba.com'
  - '.alibaba.net'
  - '.alibabacorp.com'
  - '.alicdn.com'
  - '.aliexpress.com'
  - '.alipay-corp.com'
  - '.alipay-inc.com'
  - '.alipay.com'
  - '*.*.alipay.net'
  - '.alipay.net'
  - '.alipayobjects.com'
  - '.alitrip.com'
  - '.aliway.com'
  - '.aliyun-inc.com'
  - '.aliyuncs.com'
  - '.alizoo.com'
  - '.amap.com'
  - '.antfin-inc.com'
  - '.antfin.com'
  - '.antfinancial-corp.com'
  - '.antsdaq-corp.com'
  - '.anyproxy.io'
  - '.atatech.org'
  - '.cainiao-inc.com'
  - '.cnzz.com'
  - '.dingtalk.com'
  - '.dingtalkapps.com'
  - '.ele.to'
  - '.eleme.cn'
  - '.eleme.com.cn'
  - '.eleme.io'
  - '.elemecdn.cn'
  - '.elemecdn.com'
  - '.elenet.me'
  - '.hemaos.com'
  - '.koubei-corp.com'
  - '.mayibank.net'
  - '.mmstat.com'
  - '.nlark.com'
  - '.rajax-inc.com'
  - '.rajax-inc.net'
  - '.rajax.me'
  - '.sm.cn'
  - '.taobao.net'
  - '.taobao.org'
  - '.tbcdn.cn'
  - '.tbsite.net'
  - '.tmall.net'
  - '.ucweb.local'
  - '.yunos-inc.com'
  - '.yunos.com'

  nameserver:
    - 1.2.4.8
    - 114.114.114.114
    - 223.5.5.5
    - tls://13800000000.rubyfish.cn:853
    - 119.29.29.29
    - 180.76.76.76
    #- https://13800000000.rubyfish.cn/

  fallback: # ä¸ nameserver å†…çš„æœåŠ¡å™¨åˆ—è¡¨åŒæ—¶å‘èµ·è¯·æ±‚ï¼Œå½“è§„åˆ™ç¬¦åˆ GEOIP åœ¨ CN ä»¥å¤–æ—¶ï¼Œfallback åˆ—è¡¨å†…çš„åŸŸåæœåŠ¡å™¨ç”Ÿæ•ˆã€‚
    - tls://13800000000.rubyfish.cn:853
    - tls://1.0.0.1:853
    - tls://dns.google:853

    #- https://13800000000.rubyfish.cn/
    #- https://cloudflare-dns.com/dns-query
    #- https://dns.google/dns-query

  fallback-filter:
    geoip: true # é»˜è®¤
    ipcidr: # åœ¨è¿™ä¸ªç½‘æ®µå†…çš„ IP åœ°å€ä¼šè¢«è€ƒè™‘ä¸ºè¢«æ±¡æŸ“çš„ IP
      - 240.0.0.0/4

tun:
  enable: true
  stack: system # or gvisor 
  macOS-auto-route: true
  macOS-auto-detect-interface: true
  dns-hijack:
    - tcp://8.8.8.8:53

cfw-latency-timeout: 5000

# ä»£ç†èŠ‚ç‚¹
proxies:

# ä»£ç†ç»„ç­–ç•¥
proxy-groups:

#è§„åˆ™
rules:
 - DOMAIN-SUFFIX,alipay.net,ğŸ¯ å…¨çƒç›´è¿
 - DOMAIN-SUFFIX,tbsite.net,ğŸ¯ å…¨çƒç›´è¿
 - DOMAIN-SUFFIX,alibaba.net,ğŸ¯ å…¨çƒç›´è¿
 - DOMAIN,antmonitor.ops.alipay.com,ğŸ¯ å…¨çƒç›´è¿
 - DOMAIN,antmonitor.alipay.com,ğŸ¯ å…¨çƒç›´è¿